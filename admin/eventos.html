<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRUD Eventos</title>

<link rel="stylesheet" href="../css/eventos.css">
</head>
<body>

<!-- HEADER -->
<div class="header" id="header">
    <h1>FENAL</h1>
    <nav>
        <ul>
            <li><a href="admin.html">Inicio</a></li>
            <li><a href="organizaciones.html">Organizaciones</a></li>
            <li><a href="sedes.html">Sedes</a></li>
            <li><a href="personas.html">Personas</a></li>
            <li><a href="eventos.html">Eventos</a></li>
            <li><a href="estadisticas.html">Estadísticas</a></li>
            <li><a href="libros.html">Libros</a></li>
        </ul>
    </nav>
</div>

<!-- CONTENEDOR -->
<div class="container">
    <h1>Gestión de Eventos</h1>

    <!-- BOTÓN PARA ABRIR MODAL -->
    <button class="btn-add" onclick="openModalNuevo()">➕ Nuevo Evento</button>

    <!-- BUSCADOR -->
    <!-- FILTROS -->
    <div class="filters">
        <input type="text" id="search" placeholder="Buscar por título">

        <select id="filterSede">
            <option value="">Todas las sedes</option>
        </select>

        <select id="filterTipo">
            <option value="">Todos los tipos</option>
        </select>
    </div>


    <!-- TABLA -->
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Título</th>
                <th>Sede</th>
                <th>Tipo</th>
                <th>Registro</th>
                <th>Participación</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody id="tblEventos"></tbody>
    </table>

    <!-- PAGINACIÓN -->
    <div class="paginacion" id="paginacion"></div>
</div>

<!-- TOAST -->
<div id="toast"></div>

<!-- MODAL PRINCIPAL PARA EVENTOS -->
<div id="modal" class="modal">
    <div class="modal-content">
        <h2 id="modalTitle">Nuevo Evento</h2>

        <input id="titulo" type="text" placeholder="Título del evento">
        <textarea id="sinopsis" placeholder="Sinopsis (200 caracteres)"></textarea>
        <textarea id="descripcion" placeholder="Descripción completa"></textarea>
        <textarea id="infoAd" placeholder="Información adicional"></textarea>

        <input id="imagen" type="text" placeholder="Link de la imagen">

        <!-- BOOLEANOS -->
       <div class="checks">
            <div class="check-row">
                <span>Requiere registro</span>
                <input type="checkbox" id="requiereRegistro">
            </div>

            <div class="check-row">
                <span>Participa público</span>
                <input type="checkbox" id="participaPublico">
            </div>
        </div>


        <!-- SEDE -->
        <select id="sedeSelectModal">
            <option value="" disabled selected>Selecciona una sede</option>
        </select>

        <!-- TIPO DE EVENTO -->
        <select id="tipoEventoSelectModal" onchange="mostrarSubcampos()">
            <option value="" disabled selected>Selecciona un tipo de evento</option>
        </select>

        <!-- SUBTIPOS -->

        <!-- Presentación Editorial -->
        <div id="subEditorial" class="subtipo" style="display:none;">
            <h3>Presentación Editorial</h3>
            <label>Seleccionar libro relacionado:</label>
            <select id="libroSelect">
                <option value="" disabled selected>Selecciona un libro</option>
            </select>
        </div>

        <!-- Evento Musical -->
        <div id="subMusical" class="subtipo" style="display:none;">
            <h3>Evento Musical</h3>
            <textarea id="setlist" placeholder="Setlist del evento"></textarea>
        </div>

        <!-- Taller -->
        <div id="subTaller" class="subtipo" style="display:none;">
            <h3>Taller</h3>
            <textarea id="materiales" placeholder="Materiales necesarios"></textarea>
            <input id="rangoEdad" type="text" placeholder="Rango de edad (ej. 7-12)">
        </div>

        <!-- Premiación -->
        <div id="subPremiacion" class="subtipo" style="display:none;">
            <h3>Premiación</h3>
            <input id="premio" type="text" placeholder="Premio otorgado">
        </div>

        <!-- ORGANIZACIONES -->
        <div id="orgContainer">
            <h3>Organizaciones Participantes</h3>

            <select id="orgSelect">
                <option value="" disabled selected>Selecciona una organización</option>
            </select>
            <button type="button" class="btn-add" onclick="agregarOrg()">
                ➕ Agregar organización
            </button>

            <div id="orgItems"></div> <!-- Contenedor de items agregados -->
        </div>



                <!-- PERSONAS -->
        <fieldset>
            <legend>Personas participantes</legend>

            <div id="personasEventoContainer"></div>

            <button type="button" class="btn-add" onclick="agregarPersonaEvento()">
                ➕ Agregar persona
            </button>
        </fieldset>


        <!-- HORARIOS -->
        <h3>Horarios</h3>

        <div id="horariosContainer" class="horarios-list"></div>

        <button type="button" class="btn-add" onclick="agregarHorario()">
         ➕ Agregar horario
        </button>


        <div class="modal-buttons">
            <button class="btn-primary" type="button" onclick="save()">Guardar</button>
            <button class="btn-danger" type="button" onclick="closeModal()">Cancelar</button>
        </div>
    </div>
</div>

<!-- FOOTER -->
<div class="footer">
    <p>&copy; 2024 FENAL. Todos los derechos reservados.</p>
</div>

<script src="../scripts/eventos.js"></script>

</body>
</html>
